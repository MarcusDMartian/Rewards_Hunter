Reward Hunter â€“ Internal Reward & Feedback Platform (Kaizen â€“ Loyalty â€“ Gamification)
á»¨ng dá»¥ng ná»™i bá»™ Ä‘Æ°á»£c thiáº¿t káº¿ nhÆ° má»™t "Kaizen â€“ Loyalty & Gamification Hub" cho nhÃ¢n viÃªn: nÆ¡i má»i ngÆ°á»i Ä‘á» xuáº¥t cáº£i tiáº¿n, ghi nháº­n láº«n nhau, nháº­n Ä‘iá»ƒm/thÆ°á»Ÿng vÃ  tham gia cÃ¡c "mini game" thÃ nh tÃ­ch, táº¥t cáº£ Ä‘á»u bÃ¡m vÃ o vÄƒn hoÃ¡ cáº£i tiáº¿n liÃªn tá»¥c.

===============================================================================
PHáº¦N A: VISION & PRODUCT OVERVIEW
===============================================================================

1. VÄƒn hoÃ¡ Kaizen & bÃ i toÃ¡n sáº£n pháº©m
1.1. Kaizen â€“ continuous improvement
Kaizen lÃ  triáº¿t lÃ½ cáº£i tiáº¿n liÃªn tá»¥c vá»›i trá»ng tÃ¢m lÃ  cÃ¡c thay Ä‘á»•i nhá», Ä‘á»u Ä‘áº·n, tÃ­ch luá»¹ thÃ nh cáº£i thiá»‡n lá»›n vá» cháº¥t lÆ°á»£ng, chi phÃ­ vÃ  hiá»‡u quáº£.
NguyÃªn táº¯c cá»‘t lÃµi: cáº£i tiáº¿n liÃªn tá»¥c, trao quyá»n cho nhÃ¢n viÃªn, tham gia cá»§a má»i cáº¥p báº­c, tÆ° duy dÃ i háº¡n vÃ  táº¡o giÃ¡ trá»‹ cho khÃ¡ch hÃ ng thay vÃ¬ tá»‘i Æ°u ngáº¯n háº¡n.

1.2. Insight sáº£n pháº©m tá»« Kaizen
Cáº§n cÆ¡ cháº¿ Ä‘á»ƒ má»i nhÃ¢n viÃªn dá»… dÃ ng ghi nháº­n váº¥n Ä‘á», Ä‘á» xuáº¥t Ã½ tÆ°á»Ÿng, tham gia cáº£i tiáº¿n hÃ ng ngÃ y, thay vÃ¬ nhá»¯ng chiáº¿n dá»‹ch lá»›n hiáº¿m hoi.
Há»‡ thá»‘ng thÆ°á»Ÿng â€“ cÃ´ng nháº­n â€“ feedback áº©n danh káº¿t há»£p gamification (Ä‘iá»ƒm, badge, leaderboard) giÃºp duy trÃ¬ Ä‘á»™ng lá»±c vÃ  vÄƒn hoÃ¡ cáº£i tiáº¿n liÃªn tá»¥c.

2. KhÃ¡i niá»‡m sáº£n pháº©m & use case chÃ­nh
2.1. Tá»•ng quan sáº£n pháº©m
TÃªn gá»£i Ã½: Reward Hunter â€“ Internal Reward & Feedback Platform
Má»¥c tiÃªu:
- XÃ¢y dá»±ng vÄƒn hoÃ¡ Kaizen: cáº£i tiáº¿n liÃªn tá»¥c, má»i ngÆ°á»i cÃ¹ng tham gia.
- TÄƒng má»©c Ä‘á»™ gáº¯n káº¿t vÃ  cÃ´ng nháº­n giá»¯a cÃ¡c nhÃ¢n viÃªn.
- Cung cáº¥p kÃªnh feedback áº©n danh an toÃ n Ä‘á»ƒ cáº£i thiá»‡n Ä‘á»™i ngÅ©, lÃ£nh Ä‘áº¡o vÃ  tá»• chá»©c.
- Táº¡o má»™t há»‡ sinh thÃ¡i "loyalty ná»™i bá»™" vá»›i Ä‘iá»ƒm, cáº¥p Ä‘á»™, badge, quÃ  táº·ng.

2.2. NhÃ³m user chÃ­nh
Member (nhÃ¢n viÃªn):
- Gá»­i Ä‘á» xuáº¥t cáº£i tiáº¿n (Kaizen Idea).
- Ghi nháº­n Ä‘á»“ng Ä‘á»™i (Kudos).
- Gá»­i feedback áº©n danh.
- Nháº­n Ä‘iá»ƒm, badge, Ä‘á»•i quÃ .

Leader/Manager:
- Duyá»‡t Ä‘á» xuáº¥t Kaizen.
- Review vÃ  xá»­ lÃ½ yÃªu cáº§u Ä‘á»•i quÃ  trong pháº¡m vi team (náº¿u Ä‘Æ°á»£c phÃ¢n quyá»n).
- Xem dashboard Ä‘Ã³ng gÃ³p Ä‘á»™i nhÃ³m.
- Gá»­i announcement, khuyáº¿n khÃ­ch hÃ nh vi Kaizen.

Admin/HR:
- Cáº¥u hÃ¬nh chÆ°Æ¡ng trÃ¬nh thÆ°á»Ÿng, rule gamification.
- Quáº£n lÃ½ danh má»¥c pháº§n thÆ°á»Ÿng, tá»“n kho quÃ .
- Quáº£n lÃ½ user, team/Ä‘Æ¡n vá»‹.
- Xem bÃ¡o cÃ¡o toÃ n cÃ´ng ty, xuáº¥t dá»¯ liá»‡u.

Superadmin (Org Owner):
- Quáº£n lÃ½ toÃ n bá»™ tá»• chá»©c cá»§a mÃ¬nh.
- Duyá»‡t/tá»« chá»‘i yÃªu cáº§u tham gia tá»• chá»©c (Join Requests).
- Quáº£n lÃ½ users, missions, rewards, badges trong tá»• chá»©c.
- Truy cáº­p Management Dashboard.

System Admin (Platform-level):
- Quáº£n lÃ½ toÃ n bá»™ platform (khÃ´ng gáº¯n vá»›i org cá»¥ thá»ƒ).
- Truy cáº­p Console (/console) Ä‘á»ƒ quáº£n lÃ½ nhiá»u organizations.
- Xem thá»‘ng kÃª toÃ n há»‡ thá»‘ng.


2.3. Use case lÃµi
Peer-to-peer recognition (Kudos):
- NhÃ¢n viÃªn táº·ng "Kudos" cho nhau, gáº¯n vá»›i giÃ¡ trá»‹ cá»‘t lÃµi (Kaizen, Collaboration, Ownershipâ€¦).
- Ná»™i dung kudos hiá»ƒn thá»‹ trÃªn "Wow Wall" táº¡o hiá»‡u á»©ng lan toáº£ tÃ­ch cá»±c.

Kaizen Idea Management:
- Má»i ngÆ°á»i táº¡o ticket cáº£i tiáº¿n (váº¥n Ä‘á» â€“ Ä‘á» xuáº¥t â€“ tÃ¡c Ä‘á»™ng).
- Leader/Committee review, approve, mark implemented.
- CÃ³ cÆ¡ cháº¿ bÃ¬nh chá»n, follow, comment.

Anonymous Feedback:
- NhÃ¢n viÃªn gá»­i feedback áº©n danh cho: Ä‘á»“ng nghiá»‡p, leader, team, hoáº·c toÃ n cÃ´ng ty.
- CÃ³ template gá»£i Ã½ (Start/Stop/Continue, NPS, 4Lâ€¦).

Loyalty & Gamification:
- Há»‡ thá»‘ng nhiá»‡m vá»¥ (missions), level, badge, leaderboard.
- Streak ngÃ y/tuáº§n gáº¯n vá»›i hÃ nh vi tá»‘t (vÃ­ dá»¥: gá»­i Ã­t nháº¥t 1 Kaizen/tuáº§n).

Rewards & Redemption:
- NhÃ¢n viÃªn tÃ­ch Ä‘iá»ƒm tá»« cÃ¡c hÃ nh vi tÃ­ch cá»±c.
- Äá»•i Ä‘iá»ƒm láº¥y voucher, day-off, quÃ  ná»™i bá»™â€¦
- Quy trÃ¬nh yÃªu cáº§u â€“ phÃª duyá»‡t â€“ fulfill.

===============================================================================
PHáº¦N B: FRONTEND IMPLEMENTATION (HIá»†N Táº I)
===============================================================================

3. MÃ´ táº£ giao diá»‡n (mobile responsive)
3.1. NguyÃªn táº¯c UX/UI & layout
Mobile-first, responsive:
Breakpoints:
- Mobile: 360â€“414px
- Tablet: 768px (md breakpoint)
- Desktop: 1280px+

Navigation:
- Mobile: bottom navigation floating 5 tab (Home, Kaizen, â• Create, Kudos, Profile) vá»›i nÃºt "+" á»Ÿ giá»¯a Ä‘á»ƒ táº¡o Kaizen má»›i.
- Web: top floating navigation bar (logo, nav links, notifications, profile) vá»›i glassmorphism design.

Thiáº¿t káº¿ Visual:
- Liquid/Gradient Background vá»›i cÃ¡c blob animation.
- Glassmorphism cards (backdrop-blur, white/60 opacity, border).
- Tailwind CSS vá»›i custom animations.

3.2. Cáº¥u trÃºc Routes hiá»‡n táº¡i
Routes Ä‘Ã£ triá»ƒn khai:
- / â€“ Home/Dashboard (Member)
- /ideas â€“ Kaizen Ideas list + create form
- /ideas/:id â€“ Idea Detail page vá»›i voting, comments, follow
- /kudos â€“ Send Kudos + Kudos Feed ("Wow Wall")
- /leaderboard â€“ Báº£ng xáº¿p háº¡ng (theo thÃ¡ng/quÃ½/táº¥t cáº£)
- /badges â€“ Badge Collection (hiá»ƒn thá»‹ badges Ä‘Ã£ unlock/chÆ°a unlock)
- /rewards â€“ Catalog & Wallet + Transaction history + Redemption history
- /profile â€“ Profile & Settings + Navigation menu
- /feedback â€“ Anonymous Feedback form vá»›i complete templates
- /settings â€“ Settings page vá»›i Dark Mode, Language, Data Reset
- /onboarding â€“ Onboarding flow (4 slides) cho first-time users

3.3. Chi tiáº¿t tá»«ng page hiá»‡n táº¡i

3.3.0. Login & Registration (Multi-tenant)
- **Multi-step Flow**:
  - Step 1: User enters email. System checks domain (e.g., `@company.com`).
  - Step 2a (New Domain): User prompted to "setup Organization" (becomes Superadmin).
  - Step 2b (Existing Domain): User prompted to "Join Request".
  - Step 2c (Invited/Normal): Standard password login.
- **UI Elements**:
  - Domain status badges (Green: Found, Blue: New).
  - Dynamic form fields based on registration type.

3.3.1. Dashboard (/)
Layout:
- Welcome section vá»›i greeting vÃ  streak indicator (Day Streak vá»›i fire icon).
- Quote/tagline: "The war for improvement never ends. Ready to deploy?"

Stats Cards (horizontal scroll trÃªn mobile):
- Main Stats Card: Hiá»ƒn thá»‹ total XP, current level, progress bar Ä‘áº¿n level tiáº¿p theo, PieChart animation.
- Badges Preview Card: Hiá»ƒn thá»‹ 3 badges Ä‘Ã£ earn, nÃºt "View All" link Ä‘áº¿n /badges.
- Impact Card (War Stats): Hiá»ƒn thá»‹ sá»‘ tactics vÃ  honor.

Daily Operations (Missions):
- Gradient glass card vá»›i danh sÃ¡ch missions.
- Má»—i mission hiá»ƒn thá»‹: title, progress bar, tráº¡ng thÃ¡i (completed/claimable/pending).
- NÃºt "Claim +X XP" cho missions Ä‘Ã£ hoÃ n thÃ nh nhÆ°ng chÆ°a claim, vá»›i animation pulse.
- Sau khi claim, hiá»ƒn thá»‹ "Collected" vá»›i checkmark.

Field Activity Feed:
- Hiá»ƒn thá»‹ 3 Kaizen ideas gáº§n nháº¥t.
- Card social dáº¡ng: avatar + tÃªn + action + idea title + impact type + thá»i gian.

3.3.2. Kaizen Ideas (/ideas)
Tab Switcher:
- "Browse Ideas" â€“ xem danh sÃ¡ch ideas
- "Submit New" â€“ form táº¡o idea má»›i

Browse Ideas View:
- Filter buttons (Latest, Top Voted, Implemented, My Team) â€“ horizontal scroll.
- Má»—i idea card hiá»ƒn thá»‹:
  - Icon theo impact type (Speed = blue, Quality = emerald).
  - Title + Status badge (mÃ u: Implemented = green, In Review = yellow, New = gray).
  - Problem section (gray box) + Proposal section (indigo box).
  - Author avatar + tÃªn + thá»i gian.
  - Vote count vá»›i up arrow.
  - Comment button.

Submit New View (Create Idea Form):
- Title input (báº¯t buá»™c).
- Impact Type select: Cost Saving, Quality Improvement, Speed/Efficiency, Safety.
- Problem textarea vá»›i "AI Polish" button â€“ gá»i Gemini API Ä‘á»ƒ cáº£i tiáº¿n vÄƒn báº£n.
- Solution textarea vá»›i "AI Polish" button.
- Submit button: "Submit Idea (+50 pts)".

AI Integration:
- Sá»­ dá»¥ng Gemini API (geminiService.ts) Ä‘á»ƒ polish vÄƒn báº£n.
- Prompt cho Kaizen: rewrite problem/proposal description, professional, clear, under 50 words.

3.3.3. Kudos (/kudos)
Tab Switcher (mobile only):
- "Wow Wall" â€“ xem kudos feed
- "Send Kudos" â€“ form gá»­i kudos

Send Kudos Form:
- "Who to?" â€“ selector chá»n ngÆ°á»i nháº­n (UI placeholder).
- Core Value buttons: Kaizen, Collaboration, Ownership, Customer.
- Message textarea vá»›i "AI Polish" button (Sparkles icon).
- "Send Kudos" button.

Wow Wall Feed:
- Header vá»›i filter: Global/My Team.
- Má»—i kudos card hiá»ƒn thá»‹:
  - Sender avatar â†’ Receiver avatar (vá»›i connecting line).
  - Core Value tag (rose color).
  - Message trong quotes.
  - Footer: sender â†’ receiver names + heart/like button vá»›i count.

AI Integration:
- Gemini API polish message: warm, encouraging, enthusiastic, under 40 words.

3.3.4. Anonymous Feedback (/feedback)
Header:
- ShieldCheck icon + title "Anonymous Feedback".
- Message: "Your voice matters. Help us improve without revealing your identity."

Privacy Notice:
- Blue info box: "Your identity is hidden. This feedback is encrypted and only aggregated data is shown to leadership."

Form:
- "Who is this feedback for?" select: Company General, My Direct Manager, HR Team.
- Template selector buttons: Start/Stop, NPS, Open.

NPS Template:
- 1-10 scale buttons.
- Scale labels: "Not Likely" â†” "Very Likely".

Comments textarea.
Submit button: "Submit Anonymously" vá»›i Send icon.

3.3.5. Rewards (/rewards)
Wallet Header:
- Gradient dark (slate-900 â†’ slate-800).
- Current balance: "[POINTS] pts" vá»›i Wallet icon.
- "How to earn?" button.

Reward Catalog:
- Grid 4 columns (responsive: 1/2/4).
- Má»—i reward card:
  - Image vá»›i hover scale effect.
  - "Low Stock" badge náº¿u stock < 10.
  - Type tag (Voucher, DayOff, Merch).
  - Name + Points cost.
  - Redeem button (disabled náº¿u khÃ´ng Ä‘á»§ Ä‘iá»ƒm).

Transaction History:
- Danh sÃ¡ch transactions.
- Má»—i transaction: icon (earn = green arrow down-left, spend = gray arrow up-right), description, date, amount (+/- prefix).

3.3.6. Leaderboard (/leaderboard)
Header:
- Indigo gradient vá»›i Trophy icon.
- Title: "Hall of Fame".
- Subtitle: "Recognizing our top contributors and continuous improvers."

Controls:
- Period toggles: This Month, This Quarter, All Time.
- Sorting thay Ä‘á»•i theo period: monthlyPoints/quarterlyPoints/points.

Leaderboard Table:
- Team filter dropdown (All Teams + dynamic teams from users).
- User rows vá»›i:
  - Rank icon (Crown gold cho #1, Medal silver cho #2, Medal bronze cho #3, sá»‘ thá»© tá»± cho cÃ²n láº¡i).
  - Avatar vá»›i Trophy icon cho #1.
  - Name + "YOU" badge náº¿u lÃ  current user.
  - Team name + Level badge.
  - Badges preview (3 badges, desktop only).
  - Points hiá»ƒn thá»‹.
- Current user row cÃ³ highlight border indigo.

3.3.7. Badges (/badges)
Header:
- Gradient violet â†’ indigo.
- Award icon + title "Badge Collection".
- Description: "Collect badges by contributing ideas, recognizing peers, and maintaining consistency."
- Progress bar: Total Unlocked [X] / [Total].

Badges Grid:
- 4 columns (responsive: 1/2/3/4).
- Má»—i badge card:
  - Icon trong box vá»›i background color.
  - Badge name + description.
  - Status tag: "Unlocked" (green) hoáº·c "Locked" (gray vá»›i Lock icon).
  - Unlocked badges: full color, hover scale effect.
  - Locked badges: grayscale, opacity-70, lock icon gÃ³c pháº£i.

Available Badges:
- Early Bird ğŸŒ… â€“ Complete a mission before 9 AM.
- Idea Machine ğŸ’¡ â€“ Submit 5 Kaizen ideas.
- Kudos Star â­ â€“ Receive 10 Kudos from colleagues.
- Top Performer ğŸ† â€“ Reach top 3 on the monthly leaderboard.
- Bug Hunter ğŸ â€“ Report or fix 5 technical issues.
- Team Player ğŸ¤ â€“ Send 20 Kudos to your teammates.
- Streak Master ğŸ”¥ â€“ Maintain a 30-day activity streak.
- Innovator ğŸš€ â€“ Have 3 ideas implemented.

3.3.8. Profile (/profile)
User Header:
- Cover gradient (indigo â†’ purple).
- Avatar vá»›i Settings button.
- Name, role, team.
- Level badge.

Level Progress:
- Next Milestone section.
- Current XP / Next Level XP.
- Progress bar vá»›i gradient.
- XP needed text.

Stats Grid:
- Total XP.
- Day Streak.

Active Missions:
- Hiá»ƒn thá»‹ 3 missions vá»›i progress bars.
- Link "View Dashboard".

Badge Collection:
- Grid badges Ä‘Ã£ unlock.
- "See All" link â†’ /badges
- "View All" placeholder náº¿u cÃ³ nhiá»u hÆ¡n.

Dossier Access (Navigation Menu):
- Tactics â†’ /ideas (Lightbulb, blue).
- Honor â†’ /kudos (Heart, rose).
- Rankings â†’ /leaderboard (Trophy, yellow).
- Loot â†’ /rewards (Gift, emerald).
- Intel Report â†’ /feedback (ShieldCheck, slate).

Logout Button:
- "Abort Mission (Sign Out)" vá»›i LogOut icon, red hover.

3.4. Components hiá»‡n táº¡i
3.4.1. Layout.tsx
- Liquid background vá»›i animated blobs (purple, blue, pink).
- Desktop: Floating top navigation bar vá»›i glassmorphism.
- Mobile: 
  - Sticky top header vá»›i logo + notifications + profile avatar.
  - Floating bottom navigation vá»›i elevated "+" button á»Ÿ giá»¯a.

Navigation Items:
- Home, Kaizen (Ideas), Kudos, Leaderboard, Badges, Rewards, Profile.

3.4.2. Leaderboard.tsx (Component)
- Props: users, sortBy, limit, showTeamFilter.
- Dynamic team filter tá»« users data.
- Rank icons: Crown, Medal (silver/bronze), sá»‘ thá»© tá»±.
- Current user highlighting.
- Responsive badges display.

3.5. Services hiá»‡n táº¡i
3.5.1. geminiService.ts
- Sá»­ dá»¥ng @google/genai SDK.
- Model: gemini-3-flash-preview.
- Function: generateRefinedText(draft, type: 'kaizen' | 'kudos').
- Kaizen prompt: professional, clear, focused on impact, under 50 words.
- Kudos prompt: warm, encouraging, enthusiastic, under 40 words.
- Error handling: fallback vá» text gá»‘c náº¿u API fail.

3.6. Superadmin Console
- **Member Requests**: Tab quáº£n lÃ½ cÃ¡c yÃªu cáº§u gia nháº­p (Join Requests) tá»« domain cá»§a tá»• chá»©c.
  - Approve: Táº¡o user account, link tá»›i Org.
  - Reject: Tá»« chá»‘i yÃªu cáº§u.

4. Data Models (Types) hiá»‡n táº¡i

4.1. User
{
  id: string;
  name: string;
  avatar: string;
  role: 'Member' | 'Leader' | 'Admin';
  team: string;
  points: number;
  monthlyPoints: number;
  quarterlyPoints: number;
  level: number;
  nextLevelPoints: number;
  streak: number;
  badges: Badge[];
}

4.2. Badge
{
  id: string;
  name: string;
  icon: string;
  color: string;
  description: string;
}

4.3. Mission
{
  id: string;
  title: string;
  progress: number;
  total: number;
  reward: number;
  completed: boolean;
  claimed: boolean;
  type: 'daily' | 'weekly';
}

4.4. KaizenIdea
{
  id: string;
  title: string;
  problem: string;
  proposal: string;
  impact: 'Cost' | 'Quality' | 'Speed' | 'Safety';
  status: 'New' | 'In Review' | 'Approved' | 'Implemented';
  votes: number;
  author: User;
  createdAt: string;
}

4.5. Kudos
{
  id: string;
  sender: User;
  receiver: User;
  coreValue: 'Kaizen' | 'Collaboration' | 'Ownership' | 'Customer First';
  message: string;
  createdAt: string;
  likes: number;
}

4.6. Reward
{
  id: string;
  name: string;
  image: string;
  cost: number;
  type: 'Voucher' | 'DayOff' | 'Merch';
  stock: number;
}

4.7. PointTransaction
{
  id: string;
  description: string;
  amount: number;
  type: 'earn' | 'spend';
  date: string;
}

4.8. Organization
{
  id: string;
  name: string;
  domain: string;
  createdAt: string;
}

4.9. JoinRequest
{
  id: string;
  email: string;
  name: string;
  orgId: string;
  status: 'PENDING' | 'APPROVED' | 'REJECTED';
  createdAt: string;
}

5. Tech Stack hiá»‡n táº¡i
5.1. Frontend
- Framework: React 18 + TypeScript.
- Build Tool: Vite.
- Routing: react-router-dom (HashRouter).
- Styling: Tailwind CSS vá»›i custom animations.
- Charts: recharts (PieChart).
- Icons: lucide-react.
- AI: @google/genai (Gemini API).

5.2. Project Structure
/
â”œâ”€â”€ App.tsx              # Main router vá»›i ThemeProvider
â”œâ”€â”€ index.tsx            # Entry point
â”œâ”€â”€ index.html           # HTML template vá»›i dark mode support
â”œâ”€â”€ types.ts             # TypeScript interfaces (Comment, RedemptionRequest, etc.)
â”œâ”€â”€ constants.ts         # Mock data
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Layout.tsx       # Main layout vá»›i navigation & dark mode
â”‚   â”œâ”€â”€ Leaderboard.tsx  # Reusable leaderboard component
â”‚   â”œâ”€â”€ UserSelectModal.tsx  # Modal search/select user
â”‚   â””â”€â”€ RedeemModal.tsx  # Reward redemption confirmation
â”œâ”€â”€ contexts/
â”‚   â””â”€â”€ ThemeContext.tsx # Dark mode context provider
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ geminiService.ts # Gemini AI integration
â”‚   â””â”€â”€ storageService.ts # LocalStorage data persistence
â”œâ”€â”€ pages/
â”‚   â”œâ”€â”€ Dashboard.tsx    # Home page
â”‚   â”œâ”€â”€ KaizenIdeas.tsx  # Ideas list + create
â”‚   â”œâ”€â”€ Kudos.tsx        # Kudos feed + send
â”‚   â”œâ”€â”€ Feedback.tsx     # Anonymous feedback
â”‚   â”œâ”€â”€ Rewards.tsx      # Reward catalog + wallet
â”‚   â”œâ”€â”€ Leaderboard.tsx  # Leaderboard page
â”‚   â”œâ”€â”€ Badges.tsx       # Badge collection
â”‚   â””â”€â”€ Profile.tsx      # User profile
â”œâ”€â”€ services/
â”‚   â””â”€â”€ geminiService.ts # Gemini AI integration
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts

===============================================================================
PHáº¦N C: BACKEND SPEC (CHÆ¯A TRIá»‚N KHAI)
===============================================================================

6. Back-End doc (API & logic)
6.1. Tech stack gá»£i Ã½
Language/Framework:
- Node.js (NestJS/Express + TypeScript) hoáº·c Java Spring Boot/.NET tuá»³ tá»• chá»©c.
- Database: PostgreSQL hoáº·c MySQL.
- ORM: TypeORM hoáº·c Prisma (náº¿u Node).
- Auth: JWT (Access + Refresh), SSO/LDAP náº¿u cáº§n.

Others:
- Redis (optional) cho cache/leaderboard.
- Message queue (optional) náº¿u cáº§n xá»­ lÃ½ async heavy.

6.2. Bounded context (trong monolith)
- Identity & Access: User, Role, Permission, Team.
- Recognition: Kudos, Badge, Leaderboard.
- Kaizen: Idea, Vote, Comment, Status.
- Feedback: Anonymous Feedback, Templates.
- Rewards: RewardItem, Redemption, PointTransaction.
- Gamification Engine: Missions, Levels, Rules, Events.
- Reporting & Audit: event log, audit log.

6.3. API chÃ­nh (REST)
Auth:
- POST /auth/login â€“ login, tráº£ vá» access token.
- POST /auth/refresh â€“ refresh token.
- POST /auth/logout â€“ revoke token.
- POST /auth/check-domain â€“ kiá»ƒm tra domain email cÃ³ thuá»™c org nÃ o khÃ´ng.
- POST /auth/register-org â€“ Ä‘Äƒng kÃ½ org má»›i + superadmin.
- POST /auth/join-request â€“ gá»­i yÃªu cáº§u tham gia org.

Users & Teams:
- GET /me â€“ thÃ´ng tin user hiá»‡n táº¡i.
- GET /users/:id â€“ chi tiáº¿t user.
- GET /users?team= â€“ list user theo team.
- GET /teams â€“ danh sÃ¡ch team.

Kaizen Ideas:
- GET /ideas â€“ list, cÃ³ filter & pagination.
- GET /ideas/:id â€“ chi tiáº¿t idea.
- POST /ideas â€“ táº¡o idea má»›i.
- PATCH /ideas/:id â€“ update (quyá»n háº¡n).
- POST /ideas/:id/vote â€“ upvote idea.
- POST /ideas/:id/comments â€“ comment.
- PATCH /ideas/:id/status â€“ thay Ä‘á»•i status (chá»‰ leader/admin).

Kudos:
- GET /kudos â€“ feed (cÃ³ filter: global, team, mine).
- POST /kudos â€“ gá»­i kudos.
- GET /kudos/me â€“ kudos tÃ´i Ä‘Ã£ nháº­n.

Feedback:
- GET /feedback/templates â€“ list template.
- POST /feedback â€“ gá»­i feedback áº©n danh.
- GET /feedback/summary â€“ summary/aggregate (role-based, khÃ´ng lá»™ danh tÃ­nh).

Rewards & Points:
- GET /wallet â€“ sá»‘ Ä‘iá»ƒm hiá»‡n táº¡i + history.
- GET /rewards â€“ catalog reward.
- POST /rewards/:id/redeem â€“ gá»­i yÃªu cáº§u redeem.
- GET /redemptions â€“ list yÃªu cáº§u redeem cá»§a user.

Gamification:
- GET /missions/today â€“ missions cho user hiá»‡n táº¡i.
- POST /events â€“ log event (vd: event_type=idea_created), engine xá»­ lÃ½ Ä‘iá»ƒm/badge.
- GET /leaderboard â€“ tráº£ vá» leaderboard theo thÃ¡ng/quÃ½/team.

Leader/Admin:
- GET /leader/dashboard â€“ metrics team.
- GET /admin/reports â€“ cÃ¡c bÃ¡o cÃ¡o chÃ­nh.
- GET/POST/PATCH /admin/rules â€“ rules points/badge/missions.
- GET/POST/PATCH /admin/rewards â€“ CRUD reward.
- GET/POST/PATCH /admin/users â€“ quáº£n lÃ½ user.
- GET /admin/join-requests â€“ danh sÃ¡ch yÃªu cáº§u tham gia (Superadmin Only).
- POST /admin/join-requests/:id/approve â€“ duyá»‡t yÃªu cáº§u.
- POST /admin/join-requests/:id/reject â€“ tá»« chá»‘i yÃªu cáº§u.

6.4. Business rules (máº«u)
Äiá»ƒm tá»« hÃ nh Ä‘á»™ng:
- Submit 1 Kaizen Idea: +50 points (hiá»‡n táº¡i hardcode trong UI).
- Idea Ä‘Æ°á»£c Approved: +Y points.
- Idea Ä‘Æ°á»£c Implemented: +Z points.
- Gá»­i Kudos: sender +a, receiver +b (cÃ³ giá»›i háº¡n/day).

Level:
- Dá»±a trÃªn tá»•ng Ä‘iá»ƒm tÃ­ch luá»¹.
- Má»—i level unlock badge hoáº·c quyá»n truy cáº­p tÃ­nh nÄƒng/mission nÃ¢ng cao.

Leaderboard:
- TÃ­nh theo thÃ¡ng/quÃ½.
- CÃ³ thá»ƒ dÃ¹ng normalized score Ä‘á»ƒ cÃ´ng báº±ng giá»¯a team lá»›n/nhá».

Feedback áº©n danh:
- LÆ°u mapping user â†’ feedback á»Ÿ báº£ng riÃªng, encrypt, chá»‰ phá»¥c vá»¥ analytics ná»™i bá»™ vá»›i quyá»n ráº¥t háº¡n cháº¿.

7. Kiáº¿n trÃºc monolith
7.1. Tá»•ng quan
- Frontend: SPA/PWA (React) deploy tÃ¡ch static hosting.
- Backend: Monolith API (REST) vá»›i modules logic rÃµ rÃ ng.
- Database: 1 instance relational DB.

7.2. Layering (backend)
- Presentation layer: controllers (HTTP handlers).
- Application layer: services/use-cases, orchestrate business logic.
- Domain layer: entities, domain services, rules.
- Infrastructure layer: ORM repositories, external integrations (email, notifications, SSO).

ThÆ° má»¥c gá»£i Ã½:
/src/modules/auth
/src/modules/users
/src/modules/teams
/src/modules/ideas
/src/modules/kudos
/src/modules/feedback
/src/modules/rewards
/src/modules/gamification
/src/modules/admin

7.3. Integration & extensibility
Hook event (domain events) cho cÃ¡c hÃ nh Ä‘á»™ng chÃ­nh:
- IdeaCreated, IdeaApproved, KudosSent, RewardRedeemed.
CÃ¡c event nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c dÃ¹ng:
- Gá»­i email/notification.
- Gá»­i sang há»‡ thá»‘ng BI/HRIS khÃ¡c.

7.4. Deployment & mÃ´i trÆ°á»ng
- MÃ´i trÆ°á»ng: dev / staging / prod.
- CI/CD: build + test + deploy container.
- Free/low-cost hosting:
  - DB: PostgreSQL/MySQL free tier.
  - Backend: Docker trÃªn server ráº» / PaaS free tier.
  - Frontend: Vercel/Netlify.

===============================================================================
PHáº¦N D: DATABASE SCHEMA (CHÆ¯A TRIá»‚N KHAI)
===============================================================================

8. Thiáº¿t káº¿ cÆ¡ sá»Ÿ dá»¯ liá»‡u
8.1. Báº£ng core
users
- id (PK)
- email (unique)
- password_hash
- name
- avatar_url
- role (enum: member, leader, admin)
- team_id (FK â†’ teams.id)
- position
- is_active (bool)
- created_at
- updated_at

teams
- id (PK)
- name
- parent_team_id (FK â†’ teams.id, nullable)
- created_at
- updated_at

user_profiles (optional)
- user_id (PK, FK â†’ users.id)
- bio
- preferences_json
- locale
- timezone
- created_at
  updated_at

organizations
- id (PK)
- name
- domain (unique)
- created_at
- updated_at

join_requests
- id (PK)
- email
- name
- password_hash
- org_id (FK -> organizations.id)
- status (enum: PENDING, APPROVED, REJECTED)
- created_at

8.2. Recognition & Kaizen
kudos
- id (PK)
- sender_id (FK â†’ users.id)
- receiver_id (FK â†’ users.id)
- core_value (enum)
- message (text)
- points_awarded (int)
- created_at

kaizen_ideas
- id (PK)
- creator_id (FK â†’ users.id)
- title
- problem_text (text)
- proposal_text (text)
- impact_type (enum: cost, speed, quality, safety, other)
- status (enum: new, in_review, approved, implemented, rejected)
- team_id (FK â†’ teams.id)
- created_at
- updated_at

kaizen_votes
- id (PK)
- idea_id (FK â†’ kaizen_ideas.id)
- voter_id (FK â†’ users.id)
- created_at
- (Unique constraint trÃªn idea_id, voter_id)

kaizen_comments
- id (PK)
- idea_id (FK â†’ kaizen_ideas.id)
- user_id (FK â†’ users.id)
- comment_text (text)
- created_at

8.3. Anonymous Feedback
feedback_templates
- id (PK)
- name
- type (enum: start_stop_continue, nps, four_l, custom)
- schema_json (JSON)
- is_active (bool)
- created_at
- updated_at

feedback_entries
- id (PK)
- template_id (FK â†’ feedback_templates.id)
- target_type (enum: user, team, company)
- target_id (nullable, FK â†’ users.id hoáº·c teams.id tuá»³ type)
- content_json (JSON)
- score (nullable, sá»‘ NPS, v.v.)
- created_at

feedback_identity_map
- id (PK)
- feedback_id (FK â†’ feedback_entries.id)
- user_id (FK â†’ users.id)
- created_at
- (Báº£ng nÃ y cáº§n báº£o vá»‡ ká»¹, phÃ¢n quyá»n riÃªng.)

8.4. Gamification & points
point_transactions
- id (PK)
- user_id (FK â†’ users.id)
- amount (int, + earn, - spend)
- type (enum: earn, spend)
- source (enum: idea_created, idea_approved, idea_implemented, kudos_sent, kudos_received, admin_adjust, redeem, mission_completed, streak_bonus)
- reference_id (nullable, link Ä‘áº¿n entity liÃªn quan)
- created_at

user_points_balance (optional)
- user_id (PK, FK â†’ users.id)
- balance (int)
- monthly_points (int)
- quarterly_points (int)
- updated_at
- (CÃ³ thá»ƒ bá» báº£ng nÃ y vÃ  tÃ­nh báº±ng SUM trÃªn point_transactions.)

levels
- id (PK)
- name
- min_points (int)
- max_points (int)
- badge_id (FK â†’ badges.id, nullable)
- benefits_json (JSON)

badges
- id (PK)
- name
- code (unique)
- description
- icon_url
- criteria_json (JSON)

user_badges
- id (PK)
- user_id (FK â†’ users.id)
- badge_id (FK â†’ badges.id)
- awarded_at
- reason (text)

missions
- id (PK)
- name
- description
- trigger_type (enum: daily, weekly, event)
- rules_json (JSON) â€“ Ä‘á»‹nh nghÄ©a logic, vÃ­ dá»¥: { "event": "idea_created", "min_count": 1, "period": "day" }
- reward_points (int)
- is_active (bool)
- created_at
- updated_at

user_missions
- id (PK)
- user_id (FK â†’ users.id)
- mission_id (FK â†’ missions.id)
- status (enum: active, completed, expired, claimed)
- progress_value (int)
- period_start (datetime)
- period_end (datetime)
- updated_at

8.5. Rewards
rewards
- id (PK)
- name
- description
- image_url
- points_cost (int)
- stock (int)
- type (enum: voucher, day_off, merchandise, other)
- is_active (bool)
- metadata_json (JSON)
- created_at
- updated_at

redemption_requests
- id (PK)
- user_id (FK â†’ users.id)
- reward_id (FK â†’ rewards.id)
- status (enum: pending, approved, rejected, fulfilled)
- requested_at
- processed_by (FK â†’ users.id, nullable)
- processed_at (nullable)
- note (text, nullable)

8.6. Reporting & audit
events
- id (PK)
- user_id (FK â†’ users.id, nullable náº¿u system event)
- event_type (string)
- payload_json (JSON)
- created_at

audit_logs
- id (PK)
- actor_id (FK â†’ users.id)
- action (string)
- entity_type (string)
- entity_id (string)
- before_json (JSON, nullable)
- after_json (JSON, nullable)
- created_at

===============================================================================
PHáº¦N E: ROADMAP & TODO
===============================================================================

9. TÃ­nh nÄƒng Ä‘Ã£ triá»ƒn khai
âœ… Dashboard vá»›i stats, missions, activity feed.
âœ… Kaizen Ideas listing vÃ  create form vá»›i AI polish.
âœ… Kudos feed (Wow Wall) vÃ  send form vá»›i AI polish.
âœ… Leaderboard vá»›i period filter vÃ  team filter.
âœ… Badges collection vá»›i unlock/lock status.
âœ… Rewards catalog vÃ  transaction history.
âœ… Anonymous feedback form vá»›i templates (NPS, Start/Stop/Continue, 4L, Open).
âœ… Profile page vá»›i stats vÃ  navigation.
âœ… Responsive design (mobile + desktop).
âœ… Gemini AI integration cho text polishing.
âœ… Multi-tenancy Architecture (Organization & JoinRequests).
âœ… Owner Dashboard (Member Requests management).
âœ… Claim mission rewards vá»›i point updates.
âœ… LocalStorage data persistence (storageService.ts).
âœ… Idea detail page (/ideas/:id) vá»›i chi tiáº¿t, status timeline.
âœ… Voting functionality (toggle vote, persist vÃ o localStorage).
âœ… Comment functionality (add comments to ideas).
âœ… Follow ideas (toggle follow status).
âœ… Kudos like/react (persist likes vÃ o localStorage).
âœ… User search/select for kudos recipient (UserSelectModal).
âœ… Reward redemption flow (RedeemModal, confirmation, points deduction).

âœ… Data Reset functionality (Settings page).
âœ… Language selection UI (Settings page - UI ready, i18n chÆ°a implement).
âœ… Onboarding flow (4 slides cho first-time users).
âœ… Data Reset functionality (Settings page).

âœ… Language selection vÃ  i18n (English, Vietnamese, Japanese).
âœ… Management Dashboard (/management) cho Leader/Admin.
âœ… In-app Notification system vá»›i real-time updates.
âœ… PWA capabilities (Service worker registration).
âœ… Káº¿t ná»‘i Frontend vá»›i Backend API (Auth, Ideas, Kudos, Rewards, v.v.).

âœ… SYSTEM_ADMIN Role - Platform-level admin khÃ´ng thuá»™c organization cá»¥ thá»ƒ.
âœ… isActive field trong auth response - Tráº£ vá» tráº¡ng thÃ¡i active cá»§a user khi login/register.
âœ… Console access riÃªng cho SYSTEM_ADMIN (thay vÃ¬ SUPERADMIN).
âœ… Diagnostic logging cho login flow (debug mode).
âœ… GitHub Pages deployment vá»›i relative paths.
âœ… Railway backend deployment vá»›i health check endpoint.


10. TÃ­nh nÄƒng cáº§n bá»• sung (Lá»™ trÃ¬nh tiáº¿p theo)
âŒ Push/email notifications (External services).
âŒ AI-driven insights report cho leadership.
âŒ SSO Integration.

11. Ghi chÃº sá»­ dá»¥ng cho AI Dev Tool
File nÃ y cÃ³ thá»ƒ dÃ¹ng lÃ m product spec + tech spec cáº¥p cao cho AI Dev hoáº·c team dev.
BÆ°á»›c tiáº¿p theo cÃ³ thá»ƒ lÃ :
1. Triá»ƒn khai Backend vá»›i APIs Ä‘Ã£ spec.
2. Káº¿t ná»‘i Frontend vá»›i Backend APIs (replace mock data).
3. ThÃªm authentication flow.
4. Triá»ƒn khai cÃ¡c tÃ­nh nÄƒng cÃ²n thiáº¿u.

CÃ³ thá»ƒ chia nhá» thÃ nh cÃ¡c file:
- 01-Product-Spec.md
- 02-UI-Spec.md
- 03-Frontend-Architecture.md
- 04-Backend-API-Spec.md
- 05-Database-Schema.md
- 06-System-Architecture.md
